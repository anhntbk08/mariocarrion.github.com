<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Mario Carrion - MonoCanvas, closer.</title><meta name=author content="Mario Carrion"><meta name=description content="The blog of Mario Carrion"><link rel=canonical href=http://www.mariocarrion.com/2006/04/16/monocanvas-closer.html><link href="//fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel="shortcut icon" href=/favicon.png><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/skeleton.css><link rel=stylesheet href=/css/screen.css><link rel=stylesheet href=/css/layout.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css><div class=container><div class="four columns sidebar"><nav><h1>Hello stranger!</h1><a href=/><img src=/images/logo.png id=logo alt="Blog logo" class=circular></a><h1>I&#39;m <a href=/about.html>Mario Carrion</a></h1><hr><ul id=blog-pages class=posts><li><span>&raquo; </span><a href=/about.html>About me</a><li><span>&raquo; </span><a href=/books.html>Books</a><li><span>&raquo; </span><a href=/disclaimer.html>Disclaimer</a><li><span>&raquo; </span><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM>Resume</a><li><span>&raquo; </span><a href=/archive.html#2006>All posts in 2006</a></ul><div id=social><div id=stalker><a href=https://github.com/MarioCarrion><i class="fa fa-github-square"></i></a><a href=http://stackoverflow.com/users/134327><i class="fa fa-stack-overflow"></i></a><a href=https://twitter.com/mariocarrion><i class="fa fa-twitter-square"></i></a><a href=https://www.linkedin.com/in/mariocarrion><i class="fa fa-linkedin-square"></i></a></div></div></nav></div><div class="eleven columns content"><p class=meta>Apr 16, 2006
<a href=/><i class="home fa fa-home"></i></a><h1 class=title>MonoCanvas, closer.</h1><div id=post><p>The updating to the Gtk# based version is closest ever, I'm missing Copy&Paste, DnD and MonoCanvas.Line, no doubt Line's implementation will take some time due to behavioral details when line is "glued" to other elements, after finishing it first release will hit the streets. While implementing this API I've been testing performance against its older brother, and yes, works better and faster, I was worried about this last solution wouldn't choose any other if this fails! :-P. I feel exaggerating is good to test your application in the <a href=http://www.worstcasescenarios.com/>worst case scenario</a>, some kind of extremist but doing it that way feels better.<p>Subclassing Shapes in MonoCanvas is easy, you need to implement the InnerElement, usually the drawn element, and subclass from ShapeGroup. The following is a sample that would be Actor class, spplited in ActorElement.cs:<p><code lang=csharp>using System;<br>using Drawing = System.Drawing;<br>using MonoCanvas;<p>namespace MonoCanvasGtkSharp<br>{<p>public class ActorElement : Element<br>{<p>public ActorElement () : base ()<br>{ }<p>public override void Draw (Drawing.Graphics graphics)<p>{<br>Drawing.Rectangle r = base.Rectangle;<br>int headWidth = r.Width / 3;<br>int headHeight = r.Height / 4;<p>Drawing.Rectangle head = new Drawing.Rectangle (<br>headWidth, 0,<br>headWidth, headHeight);<br>graphics.FillEllipse (base.Brush, head);<p>graphics.DrawEllipse (base.Pen, head);<p>int half = r.Width / 2;<br>graphics.DrawLine (base.Pen, half,<br>headHeight, half / 2, headHeight * 2);<br>graphics.DrawLine (base.Pen, half,<br>headHeight, r.Width - half / 2, headHeight * 2);<p>graphics.DrawLine (base.Pen, half,<br>headHeight, half, headHeight * 3);<p>graphics.DrawLine (base.Pen, half,<br>headHeight * 3, half / 2, r.Height);<br>graphics.DrawLine (base.Pen, half,<br>headHeight * 3, r.Width - half / 2, r.Height);<p>}<br>}<p>}</code><p>And ActorShape.cs:<p><code lang=csharp>using Gtk;<br>using Gdk;<br>using System;<br>using MonoCanvas;<p>namespace MonoCanvasGtkSharp<br>{<p>public class ActorShape : ShapeGroup<br>{<p>public ActorShape () : base ()<br>{<br>base.InnerElement = new ActorElement ();<br>base.AddShape (new TextShape ("Actor name",<br>base.X, base.Y + base.Height,<br>100, 20), true);<br>}<br>}<p>}</code><p>Notice the following, ActorElement class only draws the Actor but might be doing other things, the second parameter of ShapeGroup.AddShape, determines Shape's independece, meaning that the Shape is allowed to act as an Independent Shape (Moved and Resizing be dragging). This is a quick sample for subclassing MonoCanvas, the idea is to be easy and rapid to implement to create UMLCanvas.<p><a href=http://static.flickr.com/49/129576985_89196c3a24_o.png><img src=http://static.flickr.com/49/129576985_89196c3a24_m.jpg alt="MonoCanvas' actor"></a>&nbsp;&nbsp;<a href=http://static.flickr.com/53/129576984_3d516dbc14_o.png><img src=http://static.flickr.com/53/129576984_3d516dbc14_m.jpg alt="MonoCanvas' actor"></a></div><div id=related><h3>Posts</h3><ul class=posts><li><span>All in 2016!</span> <a href=/archive.html#2006>All posts from this year</a></ul><ul class=posts><li><span>Apr 13, 2006</span> <a href=http://www.mariocarrion.com/2006/04/13/dias-libres.html>DÃ­as libres</a><li><span>Apr 18, 2006</span> <a href=http://www.mariocarrion.com/2006/04/18/bugzilla.html>Bugzilla</a></ul></div><div class=footer><div class=disclaimer><p>The postings on this site are my own and do not represent my
<a href=http://www.meredith.com/>employer's</a> positions, strategies or opinions.<p>&copy; Mario Carrion, 2004-2016 &mdash; built with <a href=https://gohugo.io/>Hugo</a> using a heavily modified version of <a href=https://github.com/swanson/lagom>Lagom theme</a></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-75640250-1','auto');ga('send','pageview');</script>