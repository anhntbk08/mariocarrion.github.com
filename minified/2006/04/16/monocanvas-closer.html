<!doctype html><html lang=en-us><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=author content="Mario Carrion"><meta name=description content="The updating to the Gtk# based version is closest ever, I'm missing Copy&Paste, DnD and MonoCanvas.Line, no doubt Line's implementation will take some time due to behavioral details when line is &#34;glued&#34; to other elements, after finishing it first release will hit the streets. While implementing this API I've been testing performance against its older brother, and yes, works better and faster, I was worried about this last solution wouldn't choose any other if this fails!"><meta property="og:title" content="MonoCanvas, closer."><meta property="og:description" content="The updating to the Gtk# based version is closest ever, I'm missing Copy&Paste, DnD and MonoCanvas.Line, no doubt Line's implementation will take some time due to behavioral details when line is &#34;glued&#34; to other elements, after finishing it first release will hit the streets. While implementing this API I've been testing performance against its older brother, and yes, works better and faster, I was worried about this last solution wouldn't choose any other if this fails!"><meta property="og:type" content="article"><meta property="og:url" content="https://www.mariocarrion.com/2006/04/16/monocanvas-closer.html"><meta property="article:published_time" content="2006-04-16T15:24:15+00:00"><meta property="article:modified_time" content="2006-04-16T15:24:15+00:00"><title>MonoCanvas, closer.</title><link rel=canonical href=https://www.mariocarrion.com/2006/04/16/monocanvas-closer.html><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/main.css><link rel="shortcut icon" href=/favicon.png><link rel=alternate type=application/rss+xml title="RSS Feed" href=/index.xml><body><section class=header><div class=container><div class=content><a href=/><img class=avatar src=/img/logo.png></a>
<a href=/><div class=name>Mario Carrion</div></a><nav><ul><li class=nav-about><a href=https://www.mariocarrion.com/about.html><span>About</span></a><li class=nav-archive><a href=https://www.mariocarrion.com/archive.html><span>All Posts</span></a><li class=nav-books><a href=https://www.mariocarrion.com/books.html><span>Books</span></a><li class=nav-resume><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM><span>Resume</span></a></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=/index.xml><img class=icon src=/img/rss.svg alt=rss></a>
<a href=//twitter.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/twitter.svg alt=twitter></a>
<a href=//gitlab.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/gitlab.svg alt=gitlab></a>
<a href=//github.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/github.svg alt=github></a>
<a href=//linkedin.com/in/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/linkedin.svg alt=linkedin></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>MonoCanvas, closer.</div><div class=initials><a href=https://www.mariocarrion.com></a></div></div><div class=meta><div class=date title="Sun Apr 16 2006 15:24:15 UTC">Apr 16, 2006</div></div></div><div class=markdown><p>The updating to the Gtk# based version is closest ever, I'm missing Copy&Paste, DnD and MonoCanvas.Line, no doubt Line's implementation will take some time due to behavioral details when line is "glued" to other elements, after finishing it first release will hit the streets. While implementing this API I've been testing performance against its older brother, and yes, works better and faster, I was worried about this last solution wouldn't choose any other if this fails! :-P. I feel exaggerating is good to test your application in the <a href=http://www.worstcasescenarios.com/>worst case scenario</a>, some kind of extremist but doing it that way feels better.<p>Subclassing Shapes in MonoCanvas is easy, you need to implement the InnerElement, usually the drawn element, and subclass from ShapeGroup. The following is a sample that would be Actor class, spplited in ActorElement.cs:<p><code lang=csharp>using System;<br>using Drawing = System.Drawing;<br>using MonoCanvas;<p>namespace MonoCanvasGtkSharp<br>{<p>public class ActorElement : Element<br>{<p>public ActorElement () : base ()<br>{ }<p>public override void Draw (Drawing.Graphics graphics)<p>{<br>Drawing.Rectangle r = base.Rectangle;<br>int headWidth = r.Width / 3;<br>int headHeight = r.Height / 4;<p>Drawing.Rectangle head = new Drawing.Rectangle (<br>headWidth, 0,<br>headWidth, headHeight);<br>graphics.FillEllipse (base.Brush, head);<p>graphics.DrawEllipse (base.Pen, head);<p>int half = r.Width / 2;<br>graphics.DrawLine (base.Pen, half,<br>headHeight, half / 2, headHeight * 2);<br>graphics.DrawLine (base.Pen, half,<br>headHeight, r.Width - half / 2, headHeight * 2);<p>graphics.DrawLine (base.Pen, half,<br>headHeight, half, headHeight * 3);<p>graphics.DrawLine (base.Pen, half,<br>headHeight * 3, half / 2, r.Height);<br>graphics.DrawLine (base.Pen, half,<br>headHeight * 3, r.Width - half / 2, r.Height);<p>}<br>}<p>}</code><p>And ActorShape.cs:<p><code lang=csharp>using Gtk;<br>using Gdk;<br>using System;<br>using MonoCanvas;<p>namespace MonoCanvasGtkSharp<br>{<p>public class ActorShape : ShapeGroup<br>{<p>public ActorShape () : base ()<br>{<br>base.InnerElement = new ActorElement ();<br>base.AddShape (new TextShape ("Actor name",<br>base.X, base.Y + base.Height,<br>100, 20), true);<br>}<br>}<p>}</code><p>Notice the following, ActorElement class only draws the Actor but might be doing other things, the second parameter of ShapeGroup.AddShape, determines Shape's independece, meaning that the Shape is allowed to act as an Independent Shape (Moved and Resizing be dragging). This is a quick sample for subclassing MonoCanvas, the idea is to be easy and rapid to implement to create UMLCanvas.<p><a href=http://static.flickr.com/49/129576985_89196c3a24_o.png><img src=http://static.flickr.com/49/129576985_89196c3a24_m.jpg alt="MonoCanvas' actor"></a>&nbsp;&nbsp;<a href=http://static.flickr.com/53/129576984_3d516dbc14_o.png><img src=http://static.flickr.com/53/129576984_3d516dbc14_m.jpg alt="MonoCanvas' actor"></a></p><br><p class=back-to-posts><a href=/archive.html>Back to posts</a></div><br><div class=disqus></div></div></div></section>