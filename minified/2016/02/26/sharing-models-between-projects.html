<!doctype html><html lang=en-us><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=no-referrer><meta name=author content="Mario Carrion"><meta name=description content="Share your ActiveRecord models, keep your migration commands and use"><meta property=og:title content="Tip: Sharing ActiveRecord models between projects"><meta property=og:description content="Share your ActiveRecord models, keep your migration commands and use"><meta property=og:type content=article><meta property=og:url content=https://www.mariocarrion.com/2016/02/26/sharing-models-between-projects.html><meta property=article:published_time content=2016-02-26T00:00:00&#43;00:00><meta property=article:modified_time content=2016-02-26T00:00:00&#43;00:00><title>Tip: Sharing ActiveRecord models between projects</title><link rel=canonical href=https://www.mariocarrion.com/2016/02/26/sharing-models-between-projects.html><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/main.css><link rel="shortcut icon" href=/favicon.png><link rel=alternate type=application/rss+xml title="RSS Feed" href=/index.xml><body><section class=header><div class=container><div class=content><a href=/><img class=avatar src=/img/logo.png></a>
<a href=/><div class=name>Mario Carrion</div></a><nav><ul><li class=nav-about><a href=https://www.mariocarrion.com/about.html><span>About</span></a><li class=nav-archive><a href=https://www.mariocarrion.com/archive.html><span>All Posts</span></a><li class=nav-books><a href=https://www.mariocarrion.com/books.html><span>Books</span></a><li class=nav-resume><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM><span>Resume</span></a></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=/index.xml><img class=icon src=/img/rss.svg alt=rss></a>
<a href=//twitter.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/twitter.svg alt=twitter></a>
<a href=//gitlab.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/gitlab.svg alt=gitlab></a>
<a href=//github.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/github.svg alt=github></a>
<a href=//linkedin.com/in/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/linkedin.svg alt=linkedin></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>Tip: Sharing ActiveRecord models between projects</div><div class=initials><a href=https://www.mariocarrion.com></a></div></div><div class=meta><div class=date title="Fri Feb 26 2016 00:00:00 UTC">Feb 26, 2016</div></div></div><div class=markdown><p>How can we share all our ActiveRecord models between different projects? More importantly, how can we share those models <strong>cleanly</strong> while keeping all the familiar commands for migrating databases as well as the support for custom generators.<p>Now, the part about generators is extremely important, because we are currently using PostgreSQL&rsquo;s <a href=http://www.postgresql.org/docs/9.3/static/sql-creatematerializedview.html>Materialized Views</a> and therefore <a href=https://github.com/thoughtbot/scenic>scenic</a>, so keeping that intact is a must.<p>So to recapitulate, we need: <strong>Active Record Models</strong>, <strong>Rails Migrations</strong> and <strong>Rails Generators</strong>.<h3 id=activerecord-models-and-migrations>ActiveRecord Models and Migrations</h3><p>Migrations and Models go hand in hand. Yes, you don&rsquo;t really need migrations for your models, but they are extremely useful for making changes to your <a href=https://en.wikipedia.org/wiki/Database_model>Database Model</a>. The truth is that unless you have your schema already set on stone (which is not going to be the case) you won&rsquo;t need migrations, but if not and you&rsquo;re planning to add, remove or change your database model while working on your project you will need some sort of migrations mechanism. Period.<p>Having migrations without Rails is not something new, there are multiple gems already providing this functionality, my favorite being: <a href=https://github.com/rosenfeld/active_record_migrations>active_record_migrations</a>.<p>But, having this gem alone is not enough&hellip; what about the next thing?<h3 id=generators>Generators</h3><p>How can we use generators outside Rails? Actually, using generators outside Rails does not make too much sense, does it? It does if you, like us, depend on a gem like scenic, that uses generators for creating migrations.<p>With that dependency, it&rsquo;s not possible to use <strong>scenic</strong> with <strong>active_record_migrations</strong>, so what can we do then?<h3 id=solution-use-rails>Solution: Use Rails</h3><p>Now at this time is obvious to say that in order to make this mini project work, you need to bundle all your ActiveRecord models into a gem, this gem besides supporting all the usual <strong>rake db:related</strong> commands, you have to support <strong>generate</strong> for generating migrations and views.<p>So how then? Surprisingly, all of this is not really that difficult, it is quite simple honestly.<p>Take a look the <a href=https://github.com/mariocarrion/share-activerecord-models>repo</a> I created, it&rsquo;s really easy to follow, clone it and play with it.<br><p class=back-to-posts><a href=/archive.html>Back to posts</a></div><br><div class=disqus></div></div></div></section>