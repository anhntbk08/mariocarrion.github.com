<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Mario Carrion - Amazon Kinesis Firehose: One month later</title><meta name=author content="Mario Carrion"><meta name=description content="The blog of Mario Carrion"><link rel=canonical href=http://www.mariocarrion.com/2016/11/07/amazon-kinesis-one-month-ago.html><link href="//fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel="shortcut icon" href=/favicon.png><link rel=stylesheet href=/css/base.css><link rel=stylesheet href=/css/skeleton.css><link rel=stylesheet href=/css/screen.css><link rel=stylesheet href=/css/layout.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css><div class=container><div class="four columns sidebar"><nav><h1>Hello stranger!</h1><a href=/><img src=/images/logo.png id=logo alt="Blog logo" class=circular></a><h1>I&#39;m <a href=/about.html>Mario Carrion</a></h1><hr><ul id=blog-pages class=posts><li><span>&raquo; </span><a href=/about.html>About me</a><li><span>&raquo; </span><a href=/books.html>Books</a><li><span>&raquo; </span><a href=/disclaimer.html>Disclaimer</a><li><span>&raquo; </span><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM>Resume</a><li><span>&raquo; </span><a href=/archive.html#2016>All posts in 2016</a></ul><div id=social><div id=stalker><a href=https://github.com/MarioCarrion><i class="fa fa-github-square"></i></a><a href=http://stackoverflow.com/users/134327><i class="fa fa-stack-overflow"></i></a><a href=https://twitter.com/mariocarrion><i class="fa fa-twitter-square"></i></a><a href=https://www.linkedin.com/in/mariocarrion><i class="fa fa-linkedin-square"></i></a></div></div></nav></div><div class="eleven columns content"><p class=meta>Nov 07, 2016
<a href=/><i class="home fa fa-home"></i></a><h1 class=title>Amazon Kinesis Firehose: One month later</h1><div id=post><p>Since 2014 one of the things I&rsquo;ve been trying to do with our services is to lean towards Data Streaming while breaking up all the monolithic-like services into much more specific ones. One of those services was the one in charge of receiving data and inserting into our <a href=https://aws.amazon.com/redshift/>Data warehouse</a>, the truth is that although the endpoint and the importer were separated it could not keep up with that amount of traffic we decided to track.<p>Enter <a href=https://aws.amazon.com/blogs/aws/amazon-kinesis-firehose-simple-highly-scalable-data-ingestion/>Kinesis Firehose</a>.<p>When <em>Kinesis Firehose</em> was announced I knew for sure it will be great solution for our problem, but sadly I couldn&rsquo;t make the switch, lack of resources, different priorities and what not. <strong>That</strong> changed until recently, and oh boy what a nice change.<p>Not only we get the usual benefits of using <strong>a</strong> Data Stream, but also we can handle much more traffic and all the data is copied into Redshift with no problems. Now, the truth is there some things, not at lot, to consider when making this change.<h2 id=redshift-considerations>Redshift considerations</h2><p>If you are familiar with Redshift, then you already know what to do, but if not keep at least the following things in mind:<ul><li>Values must be correctly escaped and truncated, use your COPY options wisely.<li>When adding new columns to the schema make sure you use <em>FILLRECORD</em> in the COPY Command options in Kinesis.</ul><h2 id=kinesis-considerations>Kinesis considerations</h2><ul><li>Sending data to Firehose takes time, make sure you send all of it asynchronously.<li>Use <strong>PutRecordBatch</strong> and send as much data as possible, the <a href=http://docs.aws.amazon.com/firehose/latest/dev/limits.html>maximum is 4 MB</a>.</ul><h2 id=thoughts-so-far>Thoughts so far</h2><p>I&rsquo;m pleased with the performance of Kinesis Firehose and, obviously, Redshift; I&rsquo;m also happy we have this ready and <em>battletested</em> before the holiday season.</div><div id=related><h3>Posts</h3><ul class=posts><li><a href=/archive.html#2016>All posts this year 2016</a></ul><ul class=posts><li><span>Nov 02, 2016</span> <a href=http://www.mariocarrion.com/2016/11/02/go-in-practice.html>Finished Reading: Go in Practice</a><li><span>Nov 17, 2016</span> <a href=http://www.mariocarrion.com/2016/11/17/gotham-go-2016-advanced-go-workshop.html>GothamGo 2016: Advanced Go Workshop</a></ul></div><div class=footer><div class=disclaimer><p>The postings on this site are my own and do not represent my
<a href=http://www.meredith.com/>employer's</a> positions, strategies or opinions.<p>&copy; Mario Carrion, 2004-2016 &mdash; built with <a href=https://gohugo.io/>Hugo</a> using a heavily modified version of <a href=https://github.com/swanson/lagom>Lagom theme</a></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-75640250-1','auto');ga('send','pageview');</script>