<!doctype html><html lang=en-us><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=no-referrer><meta name=author content="Mario Carrion"><meta name=description content="We started using Amazon Kinesis Firehose on production one month ago. How was it?"><meta property=og:title content="Amazon Kinesis Firehose: One month later"><meta property=og:description content="We started using Amazon Kinesis Firehose on production one month ago. How was it?"><meta property=og:type content=article><meta property=og:url content=https://www.mariocarrion.com/2016/11/07/amazon-kinesis-one-month-ago.html><meta property=article:published_time content=2016-11-07T00:00:00&#43;00:00><meta property=article:modified_time content=2016-11-07T00:00:00&#43;00:00><title>Amazon Kinesis Firehose: One month later</title><link rel=canonical href=https://www.mariocarrion.com/2016/11/07/amazon-kinesis-one-month-ago.html><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/main.css><link rel="shortcut icon" href=/favicon.png><link rel=alternate type=application/rss+xml title="RSS Feed" href=/index.xml><body><section class=header><div class=container><div class=content><a href=/><img class=avatar src=/img/logo.png></a>
<a href=/><div class=name>Mario Carrion</div></a><nav><ul><li class=nav-about><a href=https://www.mariocarrion.com/about.html><span>About</span></a><li class=nav-archive><a href=https://www.mariocarrion.com/archive.html><span>All Posts</span></a><li class=nav-books><a href=https://www.mariocarrion.com/books.html><span>Books</span></a><li class=nav-resume><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM><span>Resume</span></a></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=/index.xml><img class=icon src=/img/rss.svg alt=rss></a>
<a href=//github.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/github.svg alt=github></a>
<a href=//twitter.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/twitter.svg alt=twitter></a>
<a href=//linkedin.com/in/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/linkedin.svg alt=linkedin></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>Amazon Kinesis Firehose: One month later</div><div class=initials><a href=https://www.mariocarrion.com></a></div></div><div class=meta><div class=date title="Mon Nov 7 2016 00:00:00 UTC">Nov 07, 2016</div></div></div><div class=markdown><p>Since 2014 one of the things I&rsquo;ve been trying to do with our services is to lean towards Data Streaming while breaking up all the monolithic-like services into much more specific ones. One of those services was the one in charge of receiving data and inserting into our <a href=https://aws.amazon.com/redshift/>Data warehouse</a>, the truth is that although the endpoint and the importer were separated it could not keep up with that amount of traffic we decided to track.<p>Enter <a href=https://aws.amazon.com/blogs/aws/amazon-kinesis-firehose-simple-highly-scalable-data-ingestion/>Kinesis Firehose</a>.<p>When <em>Kinesis Firehose</em> was announced I knew for sure it will be great solution for our problem, but sadly I couldn&rsquo;t make the switch, lack of resources, different priorities and what not. <strong>That</strong> changed until recently, and oh boy what a nice change.<p>Not only we get the usual benefits of using <strong>a</strong> Data Stream, but also we can handle much more traffic and all the data is copied into Redshift with no problems. Now, the truth is there some things, not at lot, to consider when making this change.<h2 id=redshift-considerations>Redshift considerations</h2><p>If you are familiar with Redshift, then you already know what to do, but if not keep at least the following things in mind:<ul><li>Values must be correctly escaped and truncated, use your COPY options wisely.<li>When adding new columns to the schema make sure you use <em>FILLRECORD</em> in the COPY Command options in Kinesis.</ul><h2 id=kinesis-considerations>Kinesis considerations</h2><ul><li>Sending data to Firehose takes time, make sure you send all of it asynchronously.<li>Use <strong>PutRecordBatch</strong> and send as much data as possible, the <a href=http://docs.aws.amazon.com/firehose/latest/dev/limits.html>maximum is 4 MB</a>.</ul><h2 id=thoughts-so-far>Thoughts so far</h2><p>I&rsquo;m pleased with the performance of Kinesis Firehose and, obviously, Redshift; I&rsquo;m also happy we have this ready and <em>battletested</em> before the holiday season.<br><p class=back-to-posts><a href=/archive.html>Back to posts</a></div><br><div class=disqus></div></div></div></section>