<!doctype html><html lang=en-us><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=no-referrer><meta name=author content="Mario Carrion"><meta name=description content="While reading The Ruby Programming Language I wrote a couple of notes about the language comparing it to C#. This is the first post of the series talking about those notes.
C# and Ruby share a similar syntax to compare equality in objects. Both use the operator equals (==) and, at least, one method to compare. Ruby uses equal? and eql?, C# uses Equals. Also, both support overriding the equals (==) operator to provide a different logic in case that's required."><meta property=og:title content="Comparing Ruby and C#: Equality"><meta property=og:description content="While reading The Ruby Programming Language I wrote a couple of notes about the language comparing it to C#. This is the first post of the series talking about those notes.
C# and Ruby share a similar syntax to compare equality in objects. Both use the operator equals (==) and, at least, one method to compare. Ruby uses equal? and eql?, C# uses Equals. Also, both support overriding the equals (==) operator to provide a different logic in case that's required."><meta property=og:type content=article><meta property=og:url content=https://www.mariocarrion.com/2010/03/17/comparing-ruby-and-c-equality.html><meta property=article:published_time content=2010-03-17T12:42:12&#43;00:00><meta property=article:modified_time content=2010-03-17T12:42:12&#43;00:00><title>Comparing Ruby and C#: Equality</title><link rel=canonical href=https://www.mariocarrion.com/2010/03/17/comparing-ruby-and-c-equality.html><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel=stylesheet><link rel=stylesheet href=/css/reset.css><link rel=stylesheet href=/css/main.css><link rel="shortcut icon" href=/favicon.png><link rel=alternate type=application/rss+xml title="RSS Feed" href=/index.xml><body><section class=header><div class=container><div class=content><a href=/><img class=avatar src=/img/logo.png></a>
<a href=/><div class=name>Mario Carrion</div></a><nav><ul><li class=nav-about><a href=https://www.mariocarrion.com/about.html><span>About</span></a><li class=nav-archive><a href=https://www.mariocarrion.com/archive.html><span>All Posts</span></a><li class=nav-books><a href=https://www.mariocarrion.com/books.html><span>Books</span></a><li class=nav-resume><a href=https://docs.google.com/document/d/1i0W6qNfGMhTfwWTHBaaKzlN9HLGwbk3GLeh8VtVlhNM><span>Resume</span></a></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=/index.xml><img class=icon src=/img/rss.svg alt=rss></a>
<a href=//twitter.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/twitter.svg alt=twitter></a>
<a href=//gitlab.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/gitlab.svg alt=gitlab></a>
<a href=//github.com/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/github.svg alt=github></a>
<a href=//linkedin.com/in/MarioCarrion target=_blank rel=noopener><img class=icon src=/img/linkedin.svg alt=linkedin></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>Comparing Ruby and C#: Equality</div><div class=initials><a href=https://www.mariocarrion.com></a></div></div><div class=meta><div class=date title="Wed Mar 17 2010 12:42:12 UTC">Mar 17, 2010</div></div></div><div class=markdown><p><a href=http://www.flickr.com/photos/mariocarrion/4439073605/ title="Beauty by Mario Carrion, on Flickr"><img src=http://farm3.static.flickr.com/2792/4439073605_ef6885dd43_m.jpg width=240 height=180 alt=Beauty class=aligncenter></a><p>While reading <a href=2010/01/21/the-ruby-programming-language/>The Ruby Programming Language</a> I wrote a couple of notes about the language comparing it to C#. This is the first post of the series talking about those notes.<p>C# and Ruby share a similar syntax to compare equality in objects. Both use the operator equals (==) and, at least, one method to compare. Ruby uses <em>equal?</em> and <em>eql?</em>, C# uses <em>Equals</em>. Also, both support overriding the equals (==) operator to provide a different logic in case that's required. The methods' name are different but they work pretty much the same.<p>Understanding the difference between both languages is really simple. If you already know the difference between reference types and values types you are pretty much all set.<h3>Ruby</h3><h4>Method equal?</h4><p>Method used to test reference equality in two objects. For example:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-ruby data-lang=ruby><span></span><span style=color:#75715e>#!/usr/bin/env ruby</span>

<span style=color:#f8f8f2>a</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>b</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>c</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>b</span>
<span style=color:#f8f8f2>d</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>e</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>

<span style=color:#75715e># &quot;false&quot; pointer c points to b, and b and a </span>
<span style=color:#75715e># are different types.w</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;c.equal?(a) #{</span><span style=color:#f8f8f2>c</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>equal?(a)</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;false&quot; b and a are different types</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;b.equal?(a) #{</span><span style=color:#f8f8f2>b</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>equal?(a)</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;true&quot; Same type, same value. </span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;d.equal?(e) #{</span><span style=color:#f8f8f2>d</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>equal?(e)</span><span style=color:#e6db74>}&quot;</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>/pre&gt;</span>
</code></pre></div><p><h4>Method eql?</h4><p>Synonym of equal?, not strict type conversion. Notice Hash classes uses this method for creating the hash, so if two values are the same the hash method should return the same value.<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-ruby data-lang=ruby><span></span><span style=color:#75715e>#!/usr/bin/env ruby</span>

<span style=color:#f8f8f2>a</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>b</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>c</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>b</span>
<span style=color:#f8f8f2>d</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>e</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>

<span style=color:#75715e># &quot;false&quot; Pointer c points to b, and b and a are different types</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;c.eql?(a) #{</span><span style=color:#f8f8f2>c</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>eql?(a)</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;false&quot; Different types</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;b.eql?(a) #{</span><span style=color:#f8f8f2>b</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>eql?(a)</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;true&quot; Same type, same value. </span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;d.eql?(e) #{</span><span style=color:#f8f8f2>d</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>eql?(e)</span><span style=color:#e6db74>}&quot;</span>
</code></pre></div><p><h4>Operator equals (==)</h4><p>By default, in Object class, it&rsquo;s a synonym of equal?. Tests reference equality.<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-ruby data-lang=ruby><span></span><span style=color:#75715e>#!/usr/bin/env ruby</span>

<span style=color:#f8f8f2>a</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>b</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>c</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>b</span>
<span style=color:#f8f8f2>d</span> <span style=color:#f92672>=</span> <span style=color:#f8f8f2>e</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>

<span style=color:#75715e># &quot;true&quot; Even when pointer c points to b, and b and a </span>
<span style=color:#75715e># are different types, the value is the same</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;c == a #{</span><span style=color:#f8f8f2>c</span> <span style=color:#f92672>==</span> <span style=color:#f8f8f2>a</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;true&quot; Type is casted to allow comparing them</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;b == a #{</span><span style=color:#f8f8f2>b</span> <span style=color:#f92672>==</span> <span style=color:#f8f8f2>a</span><span style=color:#e6db74>}&quot;</span> 
<span style=color:#75715e># &quot;true&quot; Same type, same value. </span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;d == e #{</span><span style=color:#f8f8f2>d</span> <span style=color:#f92672>==</span> <span style=color:#f8f8f2>e</span><span style=color:#e6db74>}&quot;</span>
</code></pre></div><h2 id=c>C</h2><p>Before explaining the equality options, notice one important difference between Ruby and C#.<p><strong>First</strong>, Ruby is a <strong>dynamic typed language</strong>. When declaring variables there&rsquo;s no <em>meaning</em> of <em>variable type</em>, all variables can be used to identify instances of different types depending on the situation. For example, we can define a variable <em>x</em> to act as a <em>string</em>, and then use the same variable <em>x</em> to act as an <em>integer</em>, this doesn&rsquo;t mean we are converting the string to integer, this means we are using the same pointer (variable x) for two different types, string and integer, pointing to two different addresses in memory. For example:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-ruby data-lang=ruby><span></span><span style=color:#75715e>#!/usr/bin/env ruby</span>

<span style=color:#f8f8f2>a</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&quot;I&#39;m string&quot;</span>
<span style=color:#75715e># Output: &quot;a Value: &#39;I&#39;m string&#39; Class: &#39;String&#39;&quot;</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;a Value: &#39;#{</span><span style=color:#f8f8f2>a</span><span style=color:#e6db74>}&#39; Class: &#39;#{</span><span style=color:#f8f8f2>a</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>class</span><span style=color:#e6db74>}&#39;&quot;</span>

<span style=color:#75715e># Output: &quot;a Value: &#39;10.0&#39; Class: &#39;Float&#39;&quot;</span>
<span style=color:#f8f8f2>a</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span>
<span style=color:#f8f8f2>puts</span> <span style=color:#e6db74>&quot;a Value: &#39;#{</span><span style=color:#f8f8f2>a</span><span style=color:#e6db74>}&#39; Class: &#39;#{</span><span style=color:#f8f8f2>a</span><span style=color:#f92672>.</span><span style=color:#f8f8f2>class</span><span style=color:#e6db74>}&#39;&quot;</span><span style=color:#f92672>&lt;</span><span style=color:#e6db74>/pre&gt;</span>
</code></pre></div><p>C# is a <strong>static typed language</strong>, all variables must indicate their type before instantiating an object. For example, when declaring a variable <em>x</em> of type <em>string</em>, you will be able to create an instance of <em>string</em>, <strong>only</strong>, there's no way to "reuse" <em>x</em> as an <em>integer</em> in the same scope. Try to compile the following example, it <strong>will</strong> fail:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>
	
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>x</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;I&#39;m string&quot;</span><span style=color:#f8f8f2>;</span>
		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;a Value: &#39;{0}&#39; Class: &#39;{1}&#39;&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>x,</span> <span style=color:#f8f8f2>x.GetType</span> <span style=color:#f8f8f2>());</span>

		<span style=color:#f8f8f2>x</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>10.0</span><span style=color:#f8f8f2>;</span> <span style=color:#75715e>// It will fail here: &quot;error CS0029: Cannot implicitly convert type `double&#39; to `string&#39;&quot;</span>
		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;a Value: &#39;{0}&#39; Class: &#39;{1}&#39;&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>x,</span> <span style=color:#f8f8f2>x.GetType</span> <span style=color:#f8f8f2>());</span>
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><p><strong>Second</strong>, memory management. Both languages manage memory automatically: by default all memory is created and released automatically, there is no need to explicitly release or allocate memory, unless the programmer wants to do so. However, in C# there's a "difference" between types. There are two <em>type categories</em>: <a href=http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx>Value Type</a> and <a href=http://msdn.microsoft.com/en-us/library/490f96s2.aspx>Reference Type</a>. The difference, related to memory use, is the way they work and the addresses in memory they use. Declaring value types automatically allocates memory, declaring reference types declares a pointer and the memory is allocated when the object pointed by the variable is instantiated. The Value Types are allocated in the <a href=http://en.wikipedia.org/wiki/Stack-based_memory_allocation>stack</a> and the Reference Types are allocated in the <a href=http://en.wikipedia.org/wiki/Dynamic_memory_allocation>heap</a>.<p>This difference is really important. Comparing two instances of <code>objects</code> with different &ldquo;category&rdquo;, one value type and one reference type, does not work, it just fails. Is like comparing an apple to an orange. Is comparing a value stored in the stack to a value stored in the heap. We can&rsquo;t compare them without writing any extra code.<p>And this extra code means using the base class <code>object</code> as the pointer for different types, because both types, value type and reference type, are subclasses of object, in one way or another. Let&rsquo;s try to compile the following example:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>object</span> <span style=color:#f8f8f2>x</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;I&#39;m string&quot;</span><span style=color:#f8f8f2>;</span>
		<span style=color:#75715e>// Output: &quot;a Value: &#39;I&#39;m string&#39; Class: &#39;System.String&#39;&quot;</span>
		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;a Value: &#39;{0}&#39; Class: &#39;{1}&#39;&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>x,</span> <span style=color:#f8f8f2>x.GetType</span> <span style=color:#f8f8f2>());</span>

		<span style=color:#f8f8f2>x</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>10.0</span><span style=color:#f8f8f2>;</span>
		<span style=color:#75715e>// Output: &quot;a Value: &#39;10&#39; Class: &#39;System.Double&#39;&quot;</span>
		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;a Value: &#39;{0}&#39; Class: &#39;{1}&#39;&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>x,</span> <span style=color:#f8f8f2>x.GetType</span> <span style=color:#f8f8f2>());</span>
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><p>After this short (or long?) explanation we are ready to see talk about the methods.<h2 id=method-object-equals>Method Object.Equals()</h2><p>Is used to test reference equality in reference types and bitwise equality in value types. For example:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>

	<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>get</span><span style=color:#f8f8f2>;</span> <span style=color:#66d9ef>set</span><span style=color:#f8f8f2>;</span> <span style=color:#f8f8f2>}</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>string</span> <span style=color:#a6e22e>ToString</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>return</span> <span style=color:#f8f8f2>Name;</span> <span style=color:#f8f8f2>}</span>
	<span style=color:#f8f8f2>}</span>
	
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#75715e>// object.Equals in Reference Types uses address memory</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass0</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>myClass0;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#66d9ef>object</span><span style=color:#f8f8f2>.Equals</span> <span style=color:#f8f8f2>(myClass0,</span> <span style=color:#f8f8f2>myClass1));</span>
		
		<span style=color:#75715e>// Let&#39;s try again. This will return false. myClass1 and myClass2 are different instances</span>
		<span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#66d9ef>object</span><span style=color:#f8f8f2>.Equals</span> <span style=color:#f8f8f2>(myClass0,</span> <span style=color:#f8f8f2>myClass1));</span>
		
		<span style=color:#75715e>// It doesn&#39;t matter myInt0 and myInt1 are different variables, equality will be true.</span>
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt0</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span> 
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt1</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myInt0,</span> <span style=color:#f8f8f2>myInt1,</span> <span style=color:#66d9ef>object</span><span style=color:#f8f8f2>.Equals</span> <span style=color:#f8f8f2>(myInt0,</span> <span style=color:#f8f8f2>myInt1));</span>
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><h2 id=operator-equals>Operator equals (==)</h2><p>Is, basically, a synonym of object.Equals, same rules apply.<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>

	<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>get</span><span style=color:#f8f8f2>;</span> <span style=color:#66d9ef>set</span><span style=color:#f8f8f2>;</span> <span style=color:#f8f8f2>}</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>string</span> <span style=color:#a6e22e>ToString</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>return</span> <span style=color:#f8f8f2>Name;</span> <span style=color:#f8f8f2>}</span>
	<span style=color:#f8f8f2>}</span>
	
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#75715e>// == in Reference Types uses address memory</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass0</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>myClass0;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#f8f8f2>myClass0</span> <span style=color:#f8f8f2>==</span> <span style=color:#f8f8f2>myClass1);</span>
		
		<span style=color:#75715e>// Let&#39;s try again. This will return false. myClass1 and myClass2 are different instances</span>
		<span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#f8f8f2>myClass0</span> <span style=color:#f8f8f2>==</span> <span style=color:#f8f8f2>myClass1);</span>
		
		<span style=color:#75715e>// It doesn&#39;t matter myInt0 and myInt1 are different variables</span>
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt0</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span> 
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt1</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myInt0,</span> <span style=color:#f8f8f2>myInt1,</span> <span style=color:#f8f8f2>myInt0</span> <span style=color:#f8f8f2>==</span> <span style=color:#f8f8f2>myInt1);</span>
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><h2 id=operator-object-referenceequals>Operator Object.ReferenceEquals()</h2><p>Pretty straightforward, tests reference:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>

	<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>get</span><span style=color:#f8f8f2>;</span> <span style=color:#66d9ef>set</span><span style=color:#f8f8f2>;</span> <span style=color:#f8f8f2>}</span>
		<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>string</span> <span style=color:#a6e22e>ToString</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#66d9ef>return</span> <span style=color:#f8f8f2>Name;</span> <span style=color:#f8f8f2>}</span>
	<span style=color:#f8f8f2>}</span>
	
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#75715e>// Object.ReferenceEquals in Reference Types uses address memory</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass0</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>
		<span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>myClass0;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#f8f8f2>System.Object.ReferenceEquals</span> <span style=color:#f8f8f2>(myClass0,</span> <span style=color:#f8f8f2>myClass1));</span>
		
		<span style=color:#75715e>// Let&#39;s try again. This will return false. myClass1 and myClass2 are different instances</span>
		<span style=color:#f8f8f2>myClass1</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>new</span> <span style=color:#f8f8f2>MyClass</span> <span style=color:#f8f8f2>()</span> <span style=color:#f8f8f2>{</span> <span style=color:#f8f8f2>Name</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;test&quot;</span> <span style=color:#f8f8f2>};</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myClass0,</span> <span style=color:#f8f8f2>myClass1,</span> <span style=color:#f8f8f2>System.Object.ReferenceEquals</span> <span style=color:#f8f8f2>(myClass0,</span> <span style=color:#f8f8f2>myClass1));</span>
		
		<span style=color:#75715e>// This will also return false.</span>
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt0</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span> 
		<span style=color:#66d9ef>int</span> <span style=color:#f8f8f2>myInt1</span> <span style=color:#f8f8f2>=</span> <span style=color:#ae81ff>1</span><span style=color:#f8f8f2>;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;object.Equals(&#39;{0}&#39;,&#39;{1}&#39;) = {2}&quot;</span><span style=color:#f8f8f2>,</span> <span style=color:#f8f8f2>myInt0,</span> <span style=color:#f8f8f2>myInt1,</span> <span style=color:#f8f8f2>System.Object.ReferenceEquals</span> <span style=color:#f8f8f2>(myInt0,</span> <span style=color:#f8f8f2>myInt1));</span>
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><h2 id=colophon>Colophon</h2><p>Sometimes you will have to use an <strong>object</strong> reference to refer to both types, value and reference, if you are planning to compare their value you have to use the static method <strong>object.Equals(a,b)</strong>. Using the operator equals (==) will always return false, because of the <a href=http://msdn.microsoft.com/en-us/library/yz2be5wk(VS.80).aspx>boxing/unboxing</a>:<div class=highlight style=background:#272822><pre style=line-height:125%><code class=language-csharp data-lang=csharp><span></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RubyAndCSharp</span> <span style=color:#f8f8f2>{</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>Main</span> <span style=color:#f8f8f2>(</span><span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>[]args)</span> <span style=color:#f8f8f2>{</span>
		<span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>str0</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;hola&quot;</span><span style=color:#f8f8f2>;</span>
		<span style=color:#66d9ef>string</span> <span style=color:#f8f8f2>str1</span> <span style=color:#f8f8f2>=</span> <span style=color:#e6db74>&quot;hola&quot;</span><span style=color:#f8f8f2>;</span>
		
		<span style=color:#66d9ef>object</span> <span style=color:#f8f8f2>obj0</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>str0;</span>
		<span style=color:#66d9ef>object</span> <span style=color:#f8f8f2>obj1</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>str1;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;Equals: {0}, Using ==: {1}, object.Equals {2}&quot;</span><span style=color:#f8f8f2>,</span> 
		                          <span style=color:#f8f8f2>obj0.Equals</span> <span style=color:#f8f8f2>(obj1),</span> <span style=color:#75715e>// True</span>
		                          <span style=color:#f8f8f2>obj0</span> <span style=color:#f8f8f2>==</span> <span style=color:#f8f8f2>obj1,</span> <span style=color:#75715e>// True</span>
		                          <span style=color:#66d9ef>object</span><span style=color:#f8f8f2>.Equals</span> <span style=color:#f8f8f2>(obj0,</span> <span style=color:#f8f8f2>obj1));</span> <span style=color:#75715e>// True</span>
		                          
		<span style=color:#66d9ef>bool</span> <span style=color:#f8f8f2>bool0</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>true</span><span style=color:#f8f8f2>;</span>
		<span style=color:#66d9ef>bool</span> <span style=color:#f8f8f2>bool1</span> <span style=color:#f8f8f2>=</span> <span style=color:#66d9ef>true</span><span style=color:#f8f8f2>;</span>
		
		<span style=color:#f8f8f2>obj0</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>bool0;</span>
		<span style=color:#f8f8f2>obj1</span> <span style=color:#f8f8f2>=</span> <span style=color:#f8f8f2>bool1;</span>

		<span style=color:#f8f8f2>System.Console.WriteLine</span> <span style=color:#f8f8f2>(</span><span style=color:#e6db74>&quot;Equals: {0}, ==: {1}, object.Equals {2}&quot;</span><span style=color:#f8f8f2>,</span> 
		                          <span style=color:#f8f8f2>obj0.Equals</span> <span style=color:#f8f8f2>(obj1),</span> <span style=color:#75715e>// True</span>
		                          <span style=color:#f8f8f2>obj0</span> <span style=color:#f8f8f2>==</span> <span style=color:#f8f8f2>obj1,</span> <span style=color:#75715e>// False</span>
		                          <span style=color:#66d9ef>object</span><span style=color:#f8f8f2>.Equals</span> <span style=color:#f8f8f2>(obj0,</span> <span style=color:#f8f8f2>obj1));</span> <span style=color:#75715e>// True</span>
		                          
	<span style=color:#f8f8f2>}</span>
<span style=color:#f8f8f2>}</span>
</code></pre></div><br><p class=back-to-posts><a href=/archive.html>Back to posts</a></div><br><div class=disqus></div></div></div></section>